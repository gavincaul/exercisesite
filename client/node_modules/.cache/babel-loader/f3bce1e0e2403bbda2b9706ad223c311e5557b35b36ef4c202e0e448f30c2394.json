{"ast":null,"code":"var _jsxFileName = \"/home/gavin/VSC/Websites/exercisesite/client/src/components/WorkoutProvider.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WorkoutContext = /*#__PURE__*/createContext(null);\nexport function WorkoutProvider({\n  exercises,\n  title,\n  children\n}) {\n  _s();\n  var _exercises$, _current$sets;\n  useEffect(() => {\n    const flatExercises = this.group.exercises.map(ex => ({\n      ...ex,\n      name: ex.movement_name || `Exercise #${ex.exercise_id}`,\n      anatomyImg: `/anatomy/${(ex.movement_name || \"\").replace(/\\s*[-–]\\s*/g, \"-\").replace(/\\s+/g, \"_\")}.jpg`,\n      exerciseImg: `/anatomy/${(ex.movement_name || \"\").replace(/\\s*[-–]\\s*/g, \"-\").replace(/\\s+/g, \"_\")}.jpg`\n    }));\n    this.exercises = flatExercises;\n  });\n  const [index, setIndex] = useState(0);\n  const [setCount, setSetCount] = useState(1);\n  const [isResting, setIsResting] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(((_exercises$ = exercises[0]) === null || _exercises$ === void 0 ? void 0 : _exercises$.time) || 0);\n  const [isRunning, setIsRunning] = useState(true);\n  const [done, setDone] = useState(false);\n  const current = exercises[index];\n  const totalSets = (_current$sets = current.sets) !== null && _current$sets !== void 0 ? _current$sets : 1;\n  const restSeconds = current.rest || 30;\n  useEffect(() => {\n    if (!isRunning || done) return;\n    const timer = setInterval(() => {\n      setTimeLeft(prev => prev - 1);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [isRunning, done]);\n  useEffect(() => {\n    if (timeLeft > 0 || done) return;\n    if (isResting) {\n      setIsResting(false);\n      if (setCount <= totalSets) {\n        setTimeLeft(current.time || 180);\n      }\n      return;\n    }\n    if (setCount < totalSets) {\n      setIsResting(true);\n      setTimeLeft(restSeconds);\n      setSetCount(s => s + 1);\n    } else if (index + 1 < exercises.length) {\n      setIsResting(true);\n      setTimeLeft(120);\n      setSetCount(1);\n      setTimeout(() => {\n        setIndex(i => i + 1);\n      }, 0);\n    } else {\n      setDone(true);\n      setIsRunning(false);\n    }\n    // eslint-disable-next-line\n  }, [timeLeft, isResting, setCount, totalSets, current, index, exercises.length, done]);\n  const pause = () => setIsRunning(false);\n  const resume = () => setIsRunning(true);\n  const skip = () => {\n    if (setCount < totalSets) {\n      setSetCount(s => s + 1);\n      setTimeLeft(exercises[index].time || 180);\n      setIsResting(false);\n      setIsRunning(true);\n    } else {\n      if (index + 1 < exercises.length) {\n        setIndex(index + 1);\n        setSetCount(1);\n        setIsResting(false);\n        setTimeLeft(exercises[index + 1].time || 180);\n      } else {\n        setDone(true);\n        setIsRunning(false);\n      }\n    }\n  };\n  const reset = () => {\n    var _exercises$index;\n    setSetCount(1);\n    setIsResting(false);\n    setTimeLeft(((_exercises$index = exercises[index]) === null || _exercises$index === void 0 ? void 0 : _exercises$index.time) || 0);\n    setDone(false);\n    setIsRunning(true);\n  };\n  return /*#__PURE__*/_jsxDEV(WorkoutContext.Provider, {\n    value: {\n      title,\n      current,\n      exercises,\n      timeLeft,\n      index,\n      isRunning,\n      isResting,\n      setCount,\n      pause,\n      resume,\n      skip,\n      reset,\n      done,\n      restSeconds\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n}\n_s(WorkoutProvider, \"Bbd4/yewUCsTTytcHuU1KCFakOI=\");\n_c = WorkoutProvider;\nexport function useWorkout() {\n  _s2();\n  const ctx = useContext(WorkoutContext);\n  if (!ctx) throw new Error(\"useWorkout must be used within WorkoutProvider\");\n  return ctx;\n}\n_s2(useWorkout, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"WorkoutProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsxDEV","_jsxDEV","WorkoutContext","WorkoutProvider","exercises","title","children","_s","_exercises$","_current$sets","flatExercises","group","map","ex","name","movement_name","exercise_id","anatomyImg","replace","exerciseImg","index","setIndex","setCount","setSetCount","isResting","setIsResting","timeLeft","setTimeLeft","time","isRunning","setIsRunning","done","setDone","current","totalSets","sets","restSeconds","rest","timer","setInterval","prev","clearInterval","s","length","setTimeout","i","pause","resume","skip","reset","_exercises$index","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useWorkout","_s2","ctx","Error","$RefreshReg$"],"sources":["/home/gavin/VSC/Websites/exercisesite/client/src/components/WorkoutProvider.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\n\nexport interface Exercise {\n  name: string;\n  exercise_id: number;\n  anatomyImg?: string;\n  exerciseImg?: string;\n  sets: number;\n  reps: number;\n  time?: number;\n  rest?: number;\n  instructions?: string;\n}\n\ninterface WorkoutContextType {\n  title: string;\n  current: Exercise;\n  group: any;\n  exercises: Exercise[];\n  timeLeft: number;\n  index: number;\n  isRunning: boolean;\n  isResting: boolean;\n  setCount: number;\n  pause: () => void;\n  resume: () => void;\n  skip: () => void;\n  reset: () => void;\n  done: boolean;\n  restSeconds: number;\n}\n\nconst WorkoutContext = createContext(\n  null as unknown as WorkoutContextType | null\n);\n\nexport function WorkoutProvider({\n  exercises,\n  title,\n  children,\n}: {\n  exercises: Exercise[];\n  title: string;\n  children: React.ReactNode;\n}) {\n  useEffect(() => {\n    const flatExercises = this.group.exercises.map((ex) => ({\n      ...ex,\n      name: ex.movement_name || `Exercise #${ex.exercise_id}`,\n      anatomyImg: `/anatomy/${(ex.movement_name || \"\")\n        .replace(/\\s*[-–]\\s*/g, \"-\")\n        .replace(/\\s+/g, \"_\")}.jpg`,\n      exerciseImg: `/anatomy/${(ex.movement_name || \"\")\n        .replace(/\\s*[-–]\\s*/g, \"-\")\n        .replace(/\\s+/g, \"_\")}.jpg`,\n    }));\n    this.exercises = flatExercises;\n  });\n  const [index, setIndex] = useState(0);\n  const [setCount, setSetCount] = useState(1);\n  const [isResting, setIsResting] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(exercises[0]?.time || 0);\n  const [isRunning, setIsRunning] = useState(true);\n  const [done, setDone] = useState(false);\n\n  const current = exercises[index];\n  const totalSets = current.sets ?? 1;\n  const restSeconds = current.rest || 30;\n\n  useEffect(() => {\n    if (!isRunning || done) return;\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => prev - 1);\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [isRunning, done]);\n\n  useEffect(() => {\n    if (timeLeft > 0 || done) return;\n\n    if (isResting) {\n      setIsResting(false);\n      if (setCount <= totalSets) {\n        setTimeLeft(current.time || 180);\n      }\n      return;\n    }\n\n    if (setCount < totalSets) {\n      setIsResting(true);\n      setTimeLeft(restSeconds);\n      setSetCount((s) => s + 1);\n    } else if (index + 1 < exercises.length) {\n      setIsResting(true);\n      setTimeLeft(120);\n      setSetCount(1);\n      setTimeout(() => {\n        setIndex((i) => i + 1);\n      }, 0);\n    } else {\n      setDone(true);\n      setIsRunning(false);\n    }\n    // eslint-disable-next-line\n  }, [\n    timeLeft,\n    isResting,\n    setCount,\n    totalSets,\n    current,\n    index,\n    exercises.length,\n    done,\n  ]);\n\n  const pause = () => setIsRunning(false);\n  const resume = () => setIsRunning(true);\n  const skip = () => {\n    if (setCount < totalSets) {\n      setSetCount((s) => s + 1);\n      setTimeLeft(exercises[index].time || 180);\n      setIsResting(false);\n      setIsRunning(true);\n    } else {\n      if (index + 1 < exercises.length) {\n        setIndex(index + 1);\n        setSetCount(1);\n        setIsResting(false);\n        setTimeLeft(exercises[index + 1].time || 180);\n      } else {\n        setDone(true);\n        setIsRunning(false);\n      }\n    }\n  };\n\n  const reset = () => {\n    setSetCount(1);\n    setIsResting(false);\n    setTimeLeft(exercises[index]?.time || 0);\n    setDone(false);\n    setIsRunning(true);\n  };\n\n  return (\n    <WorkoutContext.Provider\n      value={{\n        title,\n        current,\n        exercises,\n        timeLeft,\n        index,\n        isRunning,\n        isResting,\n        setCount,\n        pause,\n        resume,\n        skip,\n        reset,\n        done,\n        restSeconds,\n      }}\n    >\n      {children}\n    </WorkoutContext.Provider>\n  );\n}\n\nexport function useWorkout() {\n  const ctx = useContext(WorkoutContext);\n  if (!ctx) throw new Error(\"useWorkout must be used within WorkoutProvider\");\n  return ctx;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}